<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visual Matriks: Kereta vs Tiang</title>
    <!-- Tailwind CSS untuk styling pantas -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome untuk ikon Kereta dan Tiang -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Nunito', sans-serif;
            background-color: #f0f9ff;
        }
        
        /* Custom Styles untuk Matriks */
        .matrix-bracket {
            border-left: 3px solid #333;
            border-right: 3px solid #333;
            border-radius: 8px;
            padding: 5px 10px;
            display: inline-block;
            position: relative;
        }
        .matrix-bracket::before, .matrix-bracket::after {
            content: '';
            position: absolute;
            width: 8px;
            height: 3px;
            background-color: #333;
        }
        .matrix-bracket::before { top: -1.5px; left: -1.5px; }
        .matrix-bracket::after { bottom: -1.5px; left: -1.5px; }
        .matrix-bracket .tr-corner { position: absolute; top: -1.5px; right: -1.5px; width: 8px; height: 3px; background: #333; }
        .matrix-bracket .br-corner { position: absolute; bottom: -1.5px; right: -1.5px; width: 8px; height: 3px; background: #333; }

        .input-cell {
            width: 50px;
            height: 50px;
            text-align: center;
            border: 2px solid #cbd5e1;
            border-radius: 8px;
            margin: 2px;
            font-size: 1.2rem;
            font-weight: bold;
            transition: all 0.2s;
        }
        .input-cell:focus {
            border-color: #3b82f6;
            outline: none;
            background-color: #eff6ff;
        }

        /* Highlight untuk Matriks Sumber (Reference) */
        .source-active-row {
            background-color: #bfdbfe !important; /* Blue-200 matches Car */
            border-color: #2563eb !important;
            transform: scale(1.1);
            z-index: 10;
        }
        .source-active-col {
            background-color: #fef08a !important; /* Yellow-200 matches Pole */
            border-color: #ca8a04 !important;
            transform: scale(1.1);
            z-index: 10;
        }

        /* Animation Elements */
        .anim-container {
            height: 350px; /* Lebihkan tinggi sikit untuk tiang panjang */
            position: relative;
            background: #e2e8f0;
            border-radius: 12px;
            overflow: hidden;
            border-bottom: 5px solid #94a3b8; /* Jalan raya */
        }

        .car-row {
            display: flex;
            align-items: center;
            background: #bfdbfe;
            padding: 5px;
            border-radius: 8px;
            border: 2px solid #2563eb;
            position: absolute;
            transition: all 0.6s cubic-bezier(0.25, 1, 0.5, 1);
            z-index: 10;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .pole-col {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: #fef08a;
            padding: 5px;
            border-radius: 8px;
            border: 2px solid #ca8a04;
            position: absolute;
            transition: all 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            /* Transform origin set dalam JS nanti untuk ketepatan */
            z-index: 20; /* Tiang atas kereta */
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        /* Styles untuk tiang apabila jatuh */
        .pole-fallen {
            /* Tidak perlu transparent sangat sebab dah tak overlap */
            background-color: #fef08a !important; 
            border-color: #ca8a04 !important;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); /* Shadow supaya nampak terapung */
        }

        .anim-cell {
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            border: 1px solid #ccc;
            border-radius: 4px;
            margin: 2px;
            font-weight: bold;
            font-size: 1.1rem;
        }

        .highlight-active {
            background-color: #fca5a5 !important;
            transform: scale(1.15);
            border-color: #ef4444 !important;
            box-shadow: 0 0 10px rgba(239, 68, 68, 0.5);
            z-index: 30;
        }
        
        /* Connector line visualizer */
        .connector-line {
            position: absolute;
            width: 4px;
            background-color: #ef4444;
            transition: all 0.3s;
            opacity: 0.6;
            border-radius: 2px;
            z-index: 5;
        }

        .calculation-box {
            font-family: 'Courier New', monospace;
            background: #1e293b;
            color: #4ade80;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            min-height: 60px;
        }

        /* Ikon Tiang Lampu & Kereta */
        .car-icon {
            font-size: 24px;
            color: #2563eb;
            margin-right: 12px;
        }
        .pole-icon {
            font-size: 24px;
            color: #ca8a04;
            margin-bottom: 12px;
        }

        /* Hasil Akhir */
        .result-cell-anim {
            background-color: #86efac;
            border-color: #22c55e;
            animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes popIn {
            0% { transform: scale(0); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .pulse-anim {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(22, 163, 74, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(22, 163, 74, 0); }
            100% { box-shadow: 0 0 0 0 rgba(22, 163, 74, 0); }
        }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Header -->
    <header class="bg-blue-600 text-white p-4 shadow-lg">
        <div class="container mx-auto flex items-center justify-between">
            <h1 class="text-2xl font-bold"><i class="fas fa-cube mr-2"></i> Matriks: Kereta & Tiang</h1>
            <div class="text-sm bg-blue-700 px-3 py-1 rounded hidden md:block">Teknik Visual Interaktif</div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow container mx-auto p-4 max-w-4xl">
        
        <!-- Step 1: Configuration -->
        <div id="step-config" class="bg-white p-6 rounded-lg shadow-md mb-6">
            <h2 class="text-xl font-bold mb-4 text-gray-800">Langkah 1: Tentukan Saiz Matriks</h2>
            <div class="flex flex-col md:flex-row gap-8 justify-center items-center">
                <!-- Matriks A -->
                <div class="text-center">
                    <h3 class="font-bold text-blue-600 mb-2">Matriks A (Kereta)</h3>
                    <div class="flex items-center gap-2">
                        <select id="rowA" class="border p-2 rounded bg-gray-50 text-lg">
                            <option value="1">1 Baris</option>
                            <option value="2" selected>2 Baris</option>
                            <option value="3">3 Baris</option>
                        </select>
                        <span class="font-bold">x</span>
                        <select id="colA" class="border p-2 rounded bg-gray-50 text-lg">
                            <option value="1">1 Lajur</option>
                            <option value="2" selected>2 Lajur</option>
                            <option value="3">3 Lajur</option>
                        </select>
                    </div>
                </div>

                <div class="text-2xl text-gray-400"><i class="fas fa-times"></i></div>

                <!-- Matriks B -->
                <div class="text-center">
                    <h3 class="font-bold text-yellow-600 mb-2">Matriks B (Tiang)</h3>
                    <div class="flex items-center gap-2">
                        <select id="rowB" class="border p-2 rounded bg-gray-50 text-lg" disabled>
                            <!-- Auto set based on Col A -->
                            <option value="2">2 Baris</option>
                        </select>
                        <span class="font-bold">x</span>
                        <select id="colB" class="border p-2 rounded bg-gray-50 text-lg">
                            <option value="1">1 Lajur</option>
                            <option value="2" selected>2 Lajur</option>
                            <option value="3">3 Lajur</option>
                        </select>
                    </div>
                    <p class="text-xs text-red-500 mt-1">*Baris B mesti sama dengan Lajur A</p>
                </div>
            </div>
            <div class="mt-6 text-center">
                <button onclick="generateGrids()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-full transition shadow-lg transform hover:-translate-y-1">
                    Bina Matriks <i class="fas fa-arrow-right ml-2"></i>
                </button>
            </div>
        </div>

        <!-- Step 2: Input Numbers -->
        <div id="step-input" class="hidden bg-white p-6 rounded-lg shadow-md mb-6">
            <h2 class="text-xl font-bold mb-4 text-gray-800">Langkah 2: Isi Unsur Matriks</h2>
            
            <div class="flex flex-wrap justify-center items-center gap-8 mb-6">
                <!-- Grid A -->
                <div class="text-center">
                    <span class="block font-bold text-blue-600 mb-2">Matriks A</span>
                    <div class="matrix-bracket">
                        <span class="tr-corner"></span><span class="br-corner"></span>
                        <div id="gridA" class="grid gap-1"></div>
                    </div>
                </div>

                <div class="text-2xl font-bold text-gray-400">X</div>

                <!-- Grid B -->
                <div class="text-center">
                    <span class="block font-bold text-yellow-600 mb-2">Matriks B</span>
                    <div class="matrix-bracket">
                        <span class="tr-corner"></span><span class="br-corner"></span>
                        <div id="gridB" class="grid gap-1"></div>
                    </div>
                </div>
            </div>

            <div class="flex justify-center gap-4">
                <button onclick="resetConfig()" class="bg-gray-500 hover:bg-gray-600 text-white py-2 px-4 rounded">Kembali</button>
                <button onclick="startSimulationMode()" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded-full shadow-lg pulse-anim">
                    <i class="fas fa-play mr-2"></i> GO! (Mula Animasi)
                </button>
            </div>
        </div>

        <!-- Step 3: Animation Stage -->
        <div id="step-animation" class="hidden">
            
            <!-- Source Matrices Reference Area -->
            <div class="bg-gray-50 p-4 rounded-lg border border-gray-200 mb-4 flex flex-col items-center shadow-sm">
                <h3 class="text-sm font-bold text-gray-500 mb-2 uppercase tracking-wide">Rujukan Matriks</h3>
                <div class="flex flex-wrap justify-center gap-8 items-center">
                    
                    <!-- Read-Only Matrix A -->
                    <div class="text-center">
                        <div class="text-xs text-blue-600 font-bold mb-1">Matriks A</div>
                        <div class="matrix-bracket">
                            <span class="tr-corner"></span><span class="br-corner"></span>
                            <div id="readGridA" class="grid gap-1"></div>
                        </div>
                    </div>

                    <div class="text-xl text-gray-300"><i class="fas fa-times"></i></div>

                    <!-- Read-Only Matrix B -->
                    <div class="text-center">
                        <div class="text-xs text-yellow-600 font-bold mb-1">Matriks B</div>
                        <div class="matrix-bracket">
                            <span class="tr-corner"></span><span class="br-corner"></span>
                            <div id="readGridB" class="grid gap-1"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Animation Viewer -->
            <div class="bg-white p-4 rounded-lg shadow-xl mb-4 border-4 border-blue-100">
                <div class="flex justify-between items-center mb-2">
                    <h3 class="font-bold text-gray-700">Zon Simulasi</h3>
                    <div class="text-sm text-gray-500 font-mono" id="status-text">Bersedia...</div>
                </div>
                
                <!-- The Road/Stage -->
                <div class="anim-container flex items-center justify-center relative" id="anim-stage">
                    <div class="absolute bottom-2 left-2 text-gray-400 text-xs font-mono">Simulasi Fizik Matriks V2.1 (Non-Overlap)</div>
                    <!-- Elements will be injected here by JS -->
                </div>

                <!-- Math Box -->
                <div class="calculation-box text-center shadow-inner" id="math-display">
                    Tekan butang "Langkah Seterusnya" untuk mula.
                </div>
            </div>

            <!-- Result Grid -->
            <div class="bg-white p-6 rounded-lg shadow-md text-center">
                <h3 class="font-bold text-green-600 mb-4">Matriks Jawapan</h3>
                <div class="matrix-bracket">
                    <span class="tr-corner"></span><span class="br-corner"></span>
                    <div id="gridC" class="grid gap-1"></div>
                </div>
                
                <div class="mt-8 flex justify-center gap-4">
                    <button id="btn-next" onclick="nextStep()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-lg shadow text-lg w-full md:w-auto transition-transform active:scale-95">
                        Langkah Seterusnya <i class="fas fa-forward ml-2"></i>
                    </button>
                    <button id="btn-reset" onclick="resetAll()" class="hidden bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-8 rounded-lg shadow text-lg transition-transform active:scale-95">
                        Mula Semula
                    </button>
                </div>
            </div>
        </div>

    </main>

    <footer class="bg-gray-800 text-white text-center p-4 mt-4 text-sm">
        <p>Aplikasi Web Matriks - Konsep Kereta & Tiang Lampu</p>
    </footer>

    <script>
        // --- State Management ---
        let matrixA = [];
        let matrixB = [];
        let config = { rA: 2, cA: 2, rB: 2, cB: 2 };
        
        let currentStep = 0;
        let totalSteps = 0;
        let animationQueue = [];
        let isAnimating = false;

        // --- DOM Elements ---
        const elRowA = document.getElementById('rowA');
        const elColA = document.getElementById('colA');
        const elRowB = document.getElementById('rowB');
        const elColB = document.getElementById('colB');
        
        // --- Event Listeners ---
        elColA.addEventListener('change', () => {
            elRowB.innerHTML = `<option value="${elColA.value}">${elColA.value} Baris</option>`;
            elRowB.value = elColA.value;
        });

        // --- Functions ---

        function generateGrids() {
            config.rA = parseInt(elRowA.value);
            config.cA = parseInt(elColA.value);
            config.rB = parseInt(elRowB.value); 
            config.cB = parseInt(elColB.value);

            renderInputGrid('gridA', config.rA, config.cA, 'a');
            renderInputGrid('gridB', config.rB, config.cB, 'b');

            document.getElementById('step-config').classList.add('hidden');
            document.getElementById('step-input').classList.remove('hidden');
            
            // Random numbers 1-5 for fun
            document.querySelectorAll('#step-input input').forEach(inp => {
                inp.value = Math.floor(Math.random() * 5) + 1;
            });
        }

        function renderInputGrid(elementId, rows, cols, prefix) {
            const container = document.getElementById(elementId);
            container.style.gridTemplateColumns = `repeat(${cols}, 1fr)`;
            container.innerHTML = '';

            for (let i = 0; i < rows; i++) {
                for (let j = 0; j < cols; j++) {
                    const input = document.createElement('input');
                    input.type = 'number';
                    input.className = 'input-cell';
                    input.id = `${prefix}-${i}-${j}`;
                    container.appendChild(input);
                }
            }
        }

        function getMatrixValues(prefix, rows, cols) {
            let matrix = [];
            for (let i = 0; i < rows; i++) {
                let row = [];
                for (let j = 0; j < cols; j++) {
                    const val = document.getElementById(`${prefix}-${i}-${j}`).value;
                    row.push(val === '' ? 0 : parseInt(val));
                }
                matrix.push(row);
            }
            return matrix;
        }

        function renderReadOnlyGrid(targetId, matrixData, rows, cols, type) {
            const container = document.getElementById(targetId);
            container.style.gridTemplateColumns = `repeat(${cols}, 1fr)`;
            container.innerHTML = '';
            
            for(let i=0; i<rows; i++) {
                for(let j=0; j<cols; j++) {
                    const div = document.createElement('div');
                    div.className = 'input-cell flex items-center justify-center bg-white text-gray-600 cursor-default transition-all duration-300';
                    div.textContent = matrixData[i][j];
                    div.id = `read-${type}-${i}-${j}`; 
                    div.style.width = '40px'; 
                    div.style.height = '40px';
                    div.style.fontSize = '1rem';
                    container.appendChild(div);
                }
            }
        }

        function startSimulationMode() {
            matrixA = getMatrixValues('a', config.rA, config.cA);
            matrixB = getMatrixValues('b', config.rB, config.cB);

            renderReadOnlyGrid('readGridA', matrixA, config.rA, config.cA, 'a');
            renderReadOnlyGrid('readGridB', matrixB, config.rB, config.cB, 'b');

            const resultGrid = document.getElementById('gridC');
            resultGrid.style.gridTemplateColumns = `repeat(${config.cB}, 1fr)`;
            resultGrid.innerHTML = '';
            
            for(let i=0; i<config.rA; i++) {
                for(let j=0; j<config.cB; j++) {
                    const cell = document.createElement('div');
                    cell.className = 'input-cell flex items-center justify-center bg-gray-100 text-gray-400';
                    cell.id = `res-${i}-${j}`;
                    cell.textContent = '?';
                    resultGrid.appendChild(cell);
                }
            }

            animationQueue = [];
            for(let i=0; i<config.rA; i++) { 
                for(let j=0; j<config.cB; j++) { 
                    animationQueue.push({ rowIdx: i, colIdx: j });
                }
            }

            currentStep = 0;
            totalSteps = animationQueue.length;

            document.getElementById('step-input').classList.add('hidden');
            document.getElementById('step-animation').classList.remove('hidden');
            document.getElementById('math-display').innerHTML = "Sedia untuk mendarab...";
            document.getElementById('btn-next').disabled = false;
            document.getElementById('btn-next').innerHTML = `Mula Langkah 1 / ${totalSteps}`;
        }

        function resetConfig() {
            document.getElementById('step-input').classList.add('hidden');
            document.getElementById('step-config').classList.remove('hidden');
        }

        function resetAll() {
            document.getElementById('step-animation').classList.add('hidden');
            document.getElementById('step-config').classList.remove('hidden');
            document.getElementById('btn-reset').classList.add('hidden');
            document.getElementById('btn-next').classList.remove('hidden');
        }

        // --- ANIMASI HIMPAP YANG TEPAT ---

        async function nextStep() {
            if (isAnimating) return;
            if (currentStep >= animationQueue.length) return;

            isAnimating = true;
            const btn = document.getElementById('btn-next');
            btn.disabled = true;
            btn.classList.add('opacity-50', 'cursor-not-allowed');

            const stepData = animationQueue[currentStep];
            const stage = document.getElementById('anim-stage');
            const mathBox = document.getElementById('math-display');

            // 1. Highlight Matriks Rujukan
            document.querySelectorAll('.source-active-row, .source-active-col').forEach(el => {
                el.classList.remove('source-active-row', 'source-active-col');
            });
            for(let c=0; c<config.cA; c++) {
                const el = document.getElementById(`read-a-${stepData.rowIdx}-${c}`);
                if(el) el.classList.add('source-active-row');
            }
            for(let r=0; r<config.rB; r++) {
                const el = document.getElementById(`read-b-${r}-${stepData.colIdx}`);
                if(el) el.classList.add('source-active-col');
            }

            stage.innerHTML = '';
            mathBox.innerHTML = '';

            // --- 2. POSISI & GEOMETRI ---
            
            const carY = 220; // Turunkan sedikit sebab kita nak ruang di atas untuk tiang terapung
            
            // Bina Elemen Kereta (Baris A)
            const carDiv = document.createElement('div');
            carDiv.className = 'car-row';
            
            const iconCar = document.createElement('i');
            iconCar.className = 'fas fa-car car-icon';
            carDiv.appendChild(iconCar);

            const rowData = matrixA[stepData.rowIdx];
            rowData.forEach(val => {
                const cell = document.createElement('div');
                cell.className = 'anim-cell border-blue-400 text-blue-700';
                cell.textContent = val;
                carDiv.appendChild(cell);
            });
            stage.appendChild(carDiv);

            // Mula Kereta di Luar Skrin Kiri
            carDiv.style.left = '-300px'; 
            carDiv.style.top = `${carY}px`; 

            // Bina Elemen Tiang (Lajur B)
            const poleDiv = document.createElement('div');
            poleDiv.className = 'pole-col';
            
            const iconPole = document.createElement('i');
            iconPole.className = 'fas fa-lightbulb pole-icon';
            poleDiv.appendChild(iconPole);

            const colData = [];
            for(let r=0; r<config.rB; r++) {
                colData.push(matrixB[r][stepData.colIdx]);
            }
            
            colData.forEach(val => {
                const cell = document.createElement('div');
                cell.className = 'anim-cell border-yellow-500 text-yellow-700';
                cell.textContent = val;
                poleDiv.appendChild(cell);
            });
            stage.appendChild(poleDiv);

            // Mula Tiang di Luar Skrin Kanan (tinggi sikit)
            poleDiv.style.right = '-100px';
            poleDiv.style.top = '20px'; // Turun sikit dari langit

            document.getElementById('status-text').textContent = "Kereta bergerak... Tiang bersedia...";

            // --- FASA 1: MASUK ---
            await wait(100);

            // Center Kereta
            carDiv.style.left = '50%';
            carDiv.style.transform = 'translateX(-50%)'; 

            // Set Lokasi Tiang
            // Kira offset untuk parking di kanan
            const offsetPx = (rowData.length * 25) + 30; 
            
            poleDiv.style.right = 'auto'; 
            poleDiv.style.left = '50%';   
            poleDiv.style.transform = `translate(${offsetPx}px, 0)`; 
            
            // Selaraskan ketinggian Tiang
            const poleHeight = (colData.length * 53) + 40;
            const poleTop = (carY + 60) - poleHeight; 
            
            poleDiv.style.top = `${poleTop}px`;

            await wait(800); 

            // --- FASA 2: HIMPAP (JATUH DI ATAS) ---
            document.getElementById('status-text').textContent = "Tiang tumbang di atas kereta!";

            poleDiv.style.transformOrigin = 'bottom left'; 
            poleDiv.classList.add('pole-fallen');

            // PERUBAHAN UTAMA: Translate Y negatif (-65px) untuk naikkan tiang ke atas
            // Supaya ia berada "just on top" dan semua nombor nampak
            poleDiv.style.transform = `translate(${offsetPx}px, -65px) rotate(-90deg)`;

            await wait(800);

            // --- FASA 3: PENGIRAAN ---
            
            let calculationHTML = `<div class="text-sm text-gray-400 mb-2">Operasi: (Baris ${stepData.rowIdx+1} x Lajur ${stepData.colIdx+1})</div>`;
            let totalSum = 0;
            let formulaParts = [];

            const carCells = carDiv.querySelectorAll('.anim-cell');
            const poleCells = poleDiv.querySelectorAll('.anim-cell');
            
            for (let k = 0; k < rowData.length; k++) {
                // Highlight
                carCells[k].classList.add('highlight-active');
                poleCells[k].classList.add('highlight-active');
                
                // Draw connector line (optional visual flair)
                // Kita boleh tambah garisan merah menyambungkan pasangan untuk lebih jelas
                // (Optional: Code for lines omitted for simplicity, highlights are clear enough)

                const valA = rowData[k];
                const valB = colData[k];
                const product = valA * valB;
                totalSum += product;
                
                formulaParts.push(`(${valA} Ã— ${valB})`);
                
                mathBox.innerHTML = calculationHTML + 
                    `<span class="text-white text-lg">` + formulaParts.join(' + ') + `</span>`;

                await wait(1000); 
                
                carCells[k].classList.remove('highlight-active');
                poleCells[k].classList.remove('highlight-active');
            }

            // --- FASA 4: HASIL ---
            mathBox.innerHTML = calculationHTML + 
                `<div class="text-xl">` + formulaParts.join(' + ') + ` = <span class="text-3xl text-green-400 font-bold glow">${totalSum}</span></div>`;

            const resCell = document.getElementById(`res-${stepData.rowIdx}-${stepData.colIdx}`);
            resCell.textContent = totalSum;
            resCell.classList.remove('bg-gray-100', 'text-gray-400');
            resCell.classList.add('result-cell-anim', 'text-gray-800', 'font-bold');

            await wait(500);

            // Reset for next
            isAnimating = false;
            currentStep++;
            
            if (currentStep < totalSteps) {
                btn.disabled = false;
                btn.classList.remove('opacity-50', 'cursor-not-allowed');
                btn.innerHTML = `Langkah Seterusnya (${currentStep + 1} / ${totalSteps})`;
                document.getElementById('status-text').textContent = "Selesai. Tekan butang seterusnya.";
            } else {
                btn.classList.add('hidden');
                document.getElementById('btn-reset').classList.remove('hidden');
                document.getElementById('status-text').textContent = "Pendaraban Matriks Selesai!";
                stage.innerHTML = '<div class="text-center mt-20 text-green-600 font-bold text-xl flex flex-col items-center"><i class="fas fa-check-circle text-5xl mb-4"></i> TAHNIAH!<span class="text-sm text-gray-400 mt-2">Semua pengiraan selesai.</span></div>';
            }
        }

        function wait(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

    </script>
</body>
</html>